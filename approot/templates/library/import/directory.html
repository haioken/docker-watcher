<!DOCTYPE HTML5>
<html>
    <head>
        ${head}
        <link href="${url_base}/static/css/library/import/directory.css?v=001" rel="stylesheet">
        <script src="${url_base}/static/js/library/import/shared.js?v=001" type="text/javascript"></script>
        <script src="${url_base}/static/js/library/import/directory.js?v=001" type="text/javascript"></script>
    </head>
    <body>
        ${navbar}
        <div class="container-fluid">
            <h1>${_('Import Directory')}</h1>
            <br/>
            <span id="progress_text"></span>
            <div class="progress hidden">
                <div class="progress-bar"></div>
            </div>

            <div id="select_directory" class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">${_('Select Directory')}</h3>
                </div>
                <div class="panel-body">
                    <div class="col-md-12">
                        <div class="input-group">
                            <span class="input-group-item">
                                <input type="text" id="directory_input" class="form-control">
                            </span>
                            <span class="input-group-btn">
                                <a class="btn btn-default" data-toggle="modal" data-target="#modal_browser">
                                    <i class="mdi mdi-folder-open"></i>
                                </a>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label>${_('Minimum File Size')}</label>
                        <div class="input-group">
                            <span class="input-group-item">
                                <input type="number" id="min_file_size" class="form-control" min="0" value="500">
                            </span>
                            <span class="input-group-addon">
                                ${_('MegaBytes')}
                            </span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label>${_('Scan Recursively')}</label>
                        <div class="input-group">
                            <span class="input-group-addon">
                                <i id="scan_recursive" class="mdi mdi-checkbox-marked c_box" value="True"></i>
                            </span>
                            <span class="input-group-item form-control">
                                ${_('Scan sub-folders as well.')}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <a id="scan_dir" class="btn btn-primary" onclick="scan_library(event, this)">
                <i class="mdi mdi-file-find"></i>
                ${_('Scan Directory')}
            </a>

            <div id="no_new_movies" class="panel panel-default hidden">
                <div class="panel-heading">
                    <h3 class="panel-title">${_('No New Movies Found')}</h3>
                </div>
                <div class="panel-body">
                    ${_('No new movies have been found.')}
                </div>
            </div>

            <div id="complete_movies" class="panel panel-default hidden">
                <div class="panel-heading">
                    <h3 class="panel-title">${_('Found Movies')}</h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th class="shrink">${_('Import')}</th>
                                <th>${_('File')}</th>
                                <th>${_('Title')}</th>
                                <th class="shrink">${_('TheMovieDB&nbsp;ID')}</th>
                                <th class="shrink">${_('Source')}</th>
                                <th>${_('Size')}</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="incomplete_movies" class="panel panel-default hidden">
                <div class="panel-heading">
                    <h3 class="panel-title">${_('Incomplete Movies')}</h3>
                </div>
                <div class="panel-body">
                    <p>${_('The following movies are missing key information. Review and correct as needed.')}</p>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th class="shrink">${_('Import')}</th>
                                <th class="file_path">${_('File')}</th>
                                <th>${_('Title')}</th>
                                <th class="shrink">${_('TheMovieDB&nbsp;ID')}</th>
                                <th class="shrink">${_('Source')}</th>
                                <th>${_('Size')}</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <a id="import_library" class="btn btn-primary hidden" onclick="import_library(event, this)">
                <i class="mdi mdi-archive"></i>
                ${_('Import Library')}
            </a>

            <div id="import_success" class="panel panel-success hidden">
                <div class="panel-heading">
                    <h3 class="panel-title">${_('Imported Movies')}</h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>${_('Title')}</th>
                                <th class="shrink">
                                    ${_('TheMovieDB&nbsp;ID')}
                                    <a href="https://www.themoviedb.org/">
                                        <i class="mdi mdi-globe"></i>
                                    </a>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="import_error" class="panel panel-danger hidden">
                <div class="panel-heading">
                    <h3 class="panel-title">${_('Import Errors')}</h3>
                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>${_('Title')}</th>
                                <th>${_('Error')}</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <a id="import_return" class="btn btn-success hidden" href="${url_base}/library/import">
                <i class="mdi mdi-undo-variant"></i>
                ${_('Return')}
            </a>


        </div>
        <textarea id="source_select" class="hidden">
            <select class="source_select btn btn-sm btn-default">
                %for source in sources:
                <option value="${source}">${source}</option>
                %endfor
            </select>
        </textarea>
        <textarea id="quality_select" class="hidden">
            <select class="quality_select btn btn-sm btn-default">
                %for profile in profiles:
                    %if profile == "Default":
                    <option value="Default" selected="true">Default</option>
                    %else:
                    <option value="${profile}">${profile}</option>
                    %endif
                %endfor
            </select>
        </textarea>

        <div id="modal_browser" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">${_('Select Library Directory')}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="well col-md-12" id="modal_current_dir">
                            ${current_dir}
                        </div>

                        <ul id="modal_file_list" class="list-group">
                            %for i in file_list:
                            <li class="col-md-6 list-group-item">
                                <i class="mdi mdi-folder"></i>
                                ${i}
                            </li>
                            %endfor
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <a type="button" class="btn btn-default" data-dismiss="modal">${_('Close')}</a>
                        <a type="button" class="btn btn-primary pull-right" onclick="file_browser_select(event, this)">${_('Select')}</a>
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>